<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MELLO 2026 - Heat 3 Results</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Metal+Mania&family=Oswald:wght@400;700&display=swap');

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { overflow-x: hidden; }

        body {
            background: #0a0a14;
            color: #d0d8e8;
            font-family: 'Oswald', sans-serif;
            overflow-x: hidden;
            overflow-y: auto;
            min-height: 100vh;
            width: 100vw;
            cursor: pointer;
            user-select: none;
        }

        /* ── AURORA BACKGROUND ── */
        .bg-aurora {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 10%, rgba(68, 204, 136, 0.10) 0%, transparent 50%),
                radial-gradient(ellipse at 55% 5%, rgba(77, 201, 246, 0.08) 0%, transparent 45%),
                radial-gradient(ellipse at 80% 20%, rgba(68, 204, 136, 0.07) 0%, transparent 40%),
                radial-gradient(ellipse at 40% 85%, rgba(77, 201, 246, 0.05) 0%, transparent 40%);
            z-index: 1;
            pointer-events: none;
            filter: blur(30px);
            animation: aurora-shift 20s ease-in-out infinite alternate;
        }

        @keyframes aurora-shift {
            0% { transform: translateY(0) scaleY(1); opacity: 0.6; filter: blur(30px) hue-rotate(0deg); }
            50% { transform: translateY(-3%) scaleY(1.1); opacity: 0.9; filter: blur(35px) hue-rotate(15deg); }
            100% { transform: translateY(2%) scaleY(0.95); opacity: 0.7; filter: blur(30px) hue-rotate(-10deg); }
        }

        /* ── FROST BASE ── */
        .frost-base {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            height: 25%;
            background:
                radial-gradient(ellipse at 30% 100%, rgba(77, 201, 246, 0.08) 0%, transparent 55%),
                radial-gradient(ellipse at 70% 100%, rgba(68, 204, 136, 0.08) 0%, transparent 55%),
                radial-gradient(ellipse at 50% 100%, rgba(224, 234, 255, 0.04) 0%, transparent 50%);
            z-index: 1;
            pointer-events: none;
            animation: frost-pulse 8s ease-in-out infinite alternate;
        }

        @keyframes frost-pulse {
            0% { opacity: 0.5; }
            50% { opacity: 0.8; }
            100% { opacity: 0.6; }
        }

        /* ── SNOWFLAKES ── */
        .snowflake {
            position: fixed;
            background: white;
            border-radius: 50%;
            opacity: 0;
            z-index: 15;
            pointer-events: none;
            animation: snowfall linear infinite;
        }

        @keyframes snowfall {
            0% { opacity: 0; transform: translateY(-5vh) translateX(0); }
            10% { opacity: var(--snow-opacity, 0.7); }
            90% { opacity: var(--snow-opacity, 0.5); }
            100% { opacity: 0; transform: translateY(105vh) translateX(var(--sway, 30px)); }
        }

        /* ── SLIDES ── */
        .slide {
            position: absolute;
            top: 0; left: 0; right: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem 1rem;
            z-index: 10;
            opacity: 0;
            pointer-events: none;
        }

        .slide.active { pointer-events: auto; }

        /* ── TITLE SLIDE ── */
        .title-main {
            font-family: 'Metal Mania', cursive;
            font-size: 6rem;
            color: #4dc9f6;
            text-shadow:
                0 0 20px rgba(77, 201, 246, 0.8),
                0 0 40px rgba(77, 201, 246, 0.4),
                0 0 80px rgba(68, 204, 136, 0.3),
                3px 3px 0 #000;
            letter-spacing: 0.1em;
            animation: title-frost 3s ease-in-out infinite alternate;
        }

        @keyframes title-frost {
            0% { text-shadow: 0 0 20px rgba(77, 201, 246, 0.8), 0 0 40px rgba(77, 201, 246, 0.4), 3px 3px 0 #000; color: #4dc9f6; }
            50% { text-shadow: 0 0 30px rgba(68, 204, 136, 0.9), 0 0 60px rgba(68, 204, 136, 0.5), 0 0 100px rgba(68, 204, 136, 0.2), 3px 3px 0 #000; color: #44cc88; }
            100% { text-shadow: 0 0 25px rgba(77, 201, 246, 0.9), 0 0 50px rgba(77, 201, 246, 0.5), 3px 3px 0 #000; color: #5dd8ff; }
        }

        .title-sub {
            font-family: 'Oswald', sans-serif;
            font-size: 2rem;
            color: #99aabb;
            text-transform: uppercase;
            letter-spacing: 0.6em;
            margin-top: 1rem;
        }

        .title-heat {
            font-family: 'Metal Mania', cursive;
            font-size: 3rem;
            color: #44cc88;
            text-shadow: 0 0 15px rgba(68, 204, 136, 0.5);
            margin-top: 2rem;
        }

        .title-runes {
            font-size: 1.6rem;
            color: #4dc9f6;
            letter-spacing: 0.8em;
            margin-top: 1.5rem;
            opacity: 0.5;
            text-shadow: 0 0 8px rgba(77, 201, 246, 0.4);
        }

        /* ── DRAMATIC HEADLINE ── */
        .dramatic-headline {
            font-family: 'Metal Mania', cursive;
            font-size: 4.5rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 0.3rem;
            line-height: 1.1;
        }

        .dramatic-sub {
            font-family: 'Oswald', sans-serif;
            font-size: 1.3rem;
            color: #8899aa;
            text-transform: uppercase;
            letter-spacing: 0.4em;
            margin-bottom: 2rem;
        }

        /* ── RESULT CARD ── */
        .result-card {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 90vw;
            overflow-wrap: break-word;
            word-break: break-word;
        }

        /* ── RUNE DIVIDER ── */
        .rune-divider {
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, transparent, #4dc9f6, #44cc88, #4dc9f6, transparent);
            margin: 1rem 0;
            position: relative;
            box-shadow: 0 0 8px rgba(77, 201, 246, 0.4);
        }

        .rune-divider::after {
            content: 'ᚠ ᚢ ᚦ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.9rem;
            color: #4dc9f6;
            text-shadow: 0 0 10px rgba(77, 201, 246, 0.8);
            letter-spacing: 0.4em;
            white-space: nowrap;
            background: #0a0a14;
            padding: 0 0.6rem;
        }

        /* ── BAND & SONG ── */
        .band-name {
            font-family: 'Metal Mania', cursive;
            font-size: 3.5rem;
            color: #4dc9f6;
            text-shadow: 0 0 20px rgba(77, 201, 246, 0.6), 2px 2px 0 #000;
            margin-bottom: 0.3rem;
            line-height: 1.15;
        }

        .song-name {
            font-family: 'Oswald', sans-serif;
            font-size: 1.6rem;
            color: #99aabb;
            font-style: italic;
            margin-bottom: 0.8rem;
        }

        /* ── POINTS DISPLAY ── */
        .points-display {
            font-family: 'Metal Mania', cursive;
            font-size: 5.5rem;
            color: #4dc9f6;
            text-shadow:
                0 0 20px rgba(77, 201, 246, 0.6),
                0 0 40px rgba(77, 201, 246, 0.3);
            line-height: 1;
            letter-spacing: 0.05em;
        }

        .points-label {
            font-size: 0.9rem;
            color: #7889;
            text-transform: uppercase;
            letter-spacing: 0.4em;
            margin-bottom: 1rem;
        }

        /* ── DESTINATION BADGES ── */
        .destination {
            margin-top: 1rem;
            padding: 0.5rem 2rem;
            font-family: 'Oswald', sans-serif;
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            border: 2px solid;
            display: inline-block;
            opacity: 0;
            transform: scale(0);
        }

        .dest-eliminated {
            color: #445566;
            border-color: #223344;
            background: rgba(20, 30, 50, 0.4);
        }

        .dest-secondchance {
            color: #44cc88;
            border-color: #44cc88;
            background: rgba(68, 204, 136, 0.08);
        }

        .dest-final {
            color: #4dc9f6;
            border-color: #4dc9f6;
            background: rgba(77, 201, 246, 0.08);
        }

        /* ── COMMENTARY ── */
        .commentary {
            margin-top: 1.2rem;
            font-size: 1rem;
            color: #8899aa;
            font-style: italic;
            max-width: 550px;
            line-height: 1.6;
        }

        /* ── VOTER INFO ── */
        .voter-info {
            margin-top: 1.2rem;
            display: flex;
            gap: 3rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .voter-group { text-align: center; }

        .voter-label {
            font-size: 0.8rem;
            color: #7889;
            text-transform: uppercase;
            letter-spacing: 0.2em;
            margin-bottom: 0.3rem;
        }

        .voter-names { font-size: 1.1rem; color: #bbc8d8; }
        .voter-names.champion { color: #4dc9f6; text-shadow: 0 0 8px rgba(77, 201, 246, 0.4); }
        .voter-names.hater { color: #ff5566; }

        /* ── WINNER OVERRIDES ── */
        .winner .dramatic-headline {
            font-size: 5.5rem;
            color: #ffd700;
            text-shadow:
                0 0 30px rgba(255, 215, 0, 0.8),
                0 0 60px rgba(255, 215, 0, 0.4),
                0 0 120px rgba(255, 180, 0, 0.2),
                3px 3px 0 #000;
            animation: winner-glow 1.5s ease-in-out infinite alternate;
        }

        @keyframes winner-glow {
            from { text-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 0 60px rgba(255, 215, 0, 0.4), 3px 3px 0 #000; }
            to { text-shadow: 0 0 50px rgba(255, 215, 0, 1), 0 0 100px rgba(255, 215, 0, 0.6), 0 0 150px rgba(255, 180, 0, 0.3), 3px 3px 0 #000; }
        }

        .winner .band-name {
            font-size: 4.5rem;
            color: #ffd700;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 0 60px rgba(255, 215, 0, 0.4), 3px 3px 0 #000;
        }

        .winner .points-display {
            font-size: 7rem;
            color: #ffd700;
            text-shadow:
                0 0 30px rgba(255, 215, 0, 0.8),
                0 0 60px rgba(255, 215, 0, 0.4),
                0 0 100px rgba(255, 180, 0, 0.2);
        }

        .winner .rune-divider {
            width: 300px;
            background: linear-gradient(90deg, transparent, #ffd700, #fff, #ffd700, transparent);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .winner .rune-divider::after {
            content: 'ᚠ ᚨ ᚱ ᚲ';
            color: #ffd700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
        }

        .winner .dest-final {
            color: #ffd700;
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
        }

        .winner .voter-names.champion { color: #ffd700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }

        /* ── FLASH OVERLAY ── */
        .flash-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 200;
            opacity: 0;
            pointer-events: none;
        }

        /* ── PROGRESS BAR ── */
        .progress-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #44cc88, #4dc9f6);
            z-index: 100;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(77, 201, 246, 0.5);
        }

        /* ── SUMMARY TABLE ── */
        .summary-table {
            border-collapse: collapse;
            font-family: 'Oswald', sans-serif;
            font-size: 1.1rem;
        }

        .summary-table th {
            color: #4dc9f6;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: 0.6rem 1.2rem;
            border-bottom: 2px solid #1a2a3a;
            font-weight: 700;
        }

        .summary-table td {
            padding: 0.5rem 1.2rem;
            border-bottom: 1px solid #0d1520;
            text-align: center;
        }

        .summary-table td:nth-child(2) { text-align: left; }
        .summary-table tr.final-row td { color: #4dc9f6; }
        .summary-table tr.sc-row td { color: #44cc88; }
        .summary-table tr.elim-row td { color: #445566; }

        .summary-heading {
            font-family: 'Metal Mania', cursive;
            font-size: 3rem;
            color: #4dc9f6;
            text-shadow: 0 0 15px rgba(77, 201, 246, 0.4);
            margin-bottom: 2rem;
        }

        /* ── CHARACTER SPANS (for GSAP stagger) ── */
        .char { display: inline-block; }

        /* ── RESPONSIVE ── */
        @media (max-width: 600px) {
            .title-main { font-size: 3.5rem; }
            .title-sub { font-size: 1.1rem; letter-spacing: 0.3em; }
            .title-heat { font-size: 1.8rem; }
            .title-runes { font-size: 1.1rem; }
            .dramatic-headline { font-size: 2.8rem; }
            .dramatic-sub { font-size: 1rem; }
            .band-name { font-size: 2.2rem; }
            .song-name { font-size: 1.2rem; }
            .points-display { font-size: 3.5rem; }
            .winner .dramatic-headline { font-size: 3.5rem; }
            .winner .band-name { font-size: 2.8rem; }
            .winner .points-display { font-size: 5rem; }
            .destination { font-size: 1rem; padding: 0.4rem 1.5rem; }
            .commentary { font-size: 0.85rem; max-width: 90vw; }
            .voter-info { gap: 1.5rem; }
            .summary-table { font-size: 0.85rem; }
            .summary-table th, .summary-table td { padding: 0.4rem 0.5rem; }
            .summary-heading { font-size: 2rem; }
            .rune-divider { width: 120px; }
        }
    </style>
</head>
<body>

<div class="bg-aurora"></div>
<div class="frost-base"></div>
<div class="flash-overlay" id="flash"></div>
<div class="progress-bar" id="progress"></div>

<!-- ═══════ Slide 0: Title ═══════ -->
<div class="slide active" id="slide-0" style="opacity:1;">
    <div class="title-main">MELLO 2026</div>
    <div class="title-sub">Frost &amp; Runes</div>
    <div class="title-heat">Heat 3 Results</div>
    <div class="title-runes">ᚠ ᚢ ᚦ ᚨ ᚱ ᚲ</div>
</div>

<!-- ═══════ Slide 1: #8 — Everon ═══════ -->
<div class="slide" id="slide-1" data-intensity="1">
    <div class="result-card">
        <div class="dramatic-headline" style="color:#445566;">FALLEN IN FROST</div>
        <div class="dramatic-sub">Eighth Place</div>
        <div class="band-name" style="color:#556677;">Everon</div>
        <div class="song-name">"OCD"</div>
        <div class="rune-divider"></div>
        <div class="points-display" style="color:#556677;" data-points="31">0</div>
        <div class="points-label">Total Points</div>
        <div class="destination dest-eliminated">Eliminated</div>
        <div class="commentary">Three voters drove ice stakes through Everon's heart &mdash; Fredda, Peppe, and Anders Östrem all delivered the 1-point kiss of death. No champion emerged from the blizzard. OCD obsessed over nothing, and the frozen north showed no mercy.</div>
        <div class="voter-info">
            <div class="voter-group">
                <div class="voter-label">Champion (10p)</div>
                <div class="voter-names" style="color:#334455;">None</div>
            </div>
            <div class="voter-group">
                <div class="voter-label">Bottom Voter (1p)</div>
                <div class="voter-names hater">Fredda, Peppe, Anders Östrem</div>
            </div>
        </div>
    </div>
</div>

<!-- ═══════ Slide 2: #7 — Sweden Metal Aid ═══════ -->
<div class="slide" id="slide-2" data-intensity="2">
    <div class="result-card">
        <div class="dramatic-headline" style="color:#556677;">SILENCED SIRENS</div>
        <div class="dramatic-sub">Seventh Place</div>
        <div class="band-name" style="color:#667788;">Sweden Metal Aid</div>
        <div class="song-name">"Sirens"</div>
        <div class="rune-divider"></div>
        <div class="points-display" style="color:#667788;" data-points="35">0</div>
        <div class="points-label">Total Points</div>
        <div class="destination dest-eliminated">Eliminated</div>
        <div class="commentary">Stockholmsjuryn answered the siren call with 10 points, but Fezz and Ola stuffed wax in their ears. A charity supergroup that couldn't buy enough favor from the jury. The sirens sang &mdash; but the north wind swallowed their voices whole.</div>
        <div class="voter-info">
            <div class="voter-group">
                <div class="voter-label">Champion (10p)</div>
                <div class="voter-names champion">Stockholmsjuryn</div>
            </div>
            <div class="voter-group">
                <div class="voter-label">Bottom Voter (1p)</div>
                <div class="voter-names hater">Fezz, Ola</div>
            </div>
        </div>
    </div>
</div>

<!-- ═══════ Slide 3: #6 — Tremonti ═══════ -->
<div class="slide" id="slide-3" data-intensity="3">
    <div class="result-card">
        <div class="dramatic-headline" style="color:#667788;">FROZEN IN FEAR</div>
        <div class="dramatic-sub">Sixth Place</div>
        <div class="band-name" style="color:#778899;">Tremonti</div>
        <div class="song-name">"Live in Fear"</div>
        <div class="rune-divider"></div>
        <div class="points-display" style="color:#778899;" data-points="39">0</div>
        <div class="points-label">Total Points</div>
        <div class="destination dest-eliminated">Eliminated</div>
        <div class="commentary">Not a single champion arose to defend Tremonti's honor. Tompa alone swung the axe with 1 point. 39 points &mdash; the exact mathematical average &mdash; proving that true mediocrity is its own punishment. Live in fear of being utterly forgettable.</div>
        <div class="voter-info">
            <div class="voter-group">
                <div class="voter-label">Champion (10p)</div>
                <div class="voter-names" style="color:#334455;">None</div>
            </div>
            <div class="voter-group">
                <div class="voter-label">Bottom Voter (1p)</div>
                <div class="voter-names hater">Tompa</div>
            </div>
        </div>
    </div>
</div>

<!-- ═══════ Slide 4: #5 — Machine Head ═══════ -->
<div class="slide" id="slide-4" data-intensity="5">
    <div class="result-card">
        <div class="dramatic-headline" style="color:#8899aa;">CHAINS UNBROKEN</div>
        <div class="dramatic-sub">Fifth Place</div>
        <div class="band-name" style="color:#99aabb;">Machine Head</div>
        <div class="song-name">"Unbound"</div>
        <div class="rune-divider"></div>
        <div class="points-display" style="color:#99aabb;" data-points="42">0</div>
        <div class="points-label">Total Points</div>
        <div class="destination dest-eliminated">Eliminated</div>
        <div class="commentary">Fezz unchained the beast with 10 points, but Kalle locked it right back up with 1. Just one point short of Andra Chansen &mdash; so close the frostbite stings. Machine Head's gears seize in the cold. Unbound in name, bound by fate.</div>
        <div class="voter-info">
            <div class="voter-group">
                <div class="voter-label">Champion (10p)</div>
                <div class="voter-names champion">Fezz</div>
            </div>
            <div class="voter-group">
                <div class="voter-label">Bottom Voter (1p)</div>
                <div class="voter-names hater">Kalle</div>
            </div>
        </div>
    </div>
</div>

<!-- ═══════ Slide 5: #4 — Bad Intentions ═══════ -->
<div class="slide" id="slide-5" data-intensity="6">
    <div class="result-card">
        <div class="dramatic-headline" style="color:#44cc88;">THE ROAD FORKS</div>
        <div class="dramatic-sub">Fourth Place</div>
        <div class="band-name">Bad Intentions</div>
        <div class="song-name">"One Way Road"</div>
        <div class="rune-divider"></div>
        <div class="points-display" data-points="43">0</div>
        <div class="points-label">Total Points</div>
        <div class="destination dest-secondchance">Andra Chansen</div>
        <div class="commentary">Fredda paved the road with 10 golden points. Stockholmsjuryn threw a spike strip with 1. One way forward &mdash; through the fires of Andra Chansen. Bad Intentions may yet prove that even crooked paths can lead to glory.</div>
        <div class="voter-info">
            <div class="voter-group">
                <div class="voter-label">Champion (10p)</div>
                <div class="voter-names champion">Fredda</div>
            </div>
            <div class="voter-group">
                <div class="voter-label">Bottom Voter (1p)</div>
                <div class="voter-names hater">Stockholmsjuryn</div>
            </div>
        </div>
    </div>
</div>

<!-- ═══════ Slide 6: #3 — Havamal ═══════ -->
<div class="slide" id="slide-6" data-intensity="7">
    <div class="result-card">
        <div class="dramatic-headline" style="color:#55dd99;">RUNIC PROPHECY</div>
        <div class="dramatic-sub">Third Place</div>
        <div class="band-name">Havamal</div>
        <div class="song-name">"The Shaman"</div>
        <div class="rune-divider"></div>
        <div class="points-display" data-points="44">0</div>
        <div class="points-label">Total Points</div>
        <div class="destination dest-secondchance">Andra Chansen</div>
        <div class="commentary">Peppe channeled the ancient spirits for a 10-point blessing. Not a single hater in the ranks &mdash; the Shaman commands universal respect, if not universal devotion. The runes were cast, and they point toward Andra Chansen. The prophecy is not yet fulfilled.</div>
        <div class="voter-info">
            <div class="voter-group">
                <div class="voter-label">Champion (10p)</div>
                <div class="voter-names champion">Peppe</div>
            </div>
            <div class="voter-group">
                <div class="voter-label">Bottom Voter (1p)</div>
                <div class="voter-names" style="color:#334455;">None</div>
            </div>
        </div>
    </div>
</div>

<!-- ═══════ Slide 7: #2 — Hällas ═══════ -->
<div class="slide" id="slide-7" data-intensity="8">
    <div class="result-card">
        <div class="dramatic-headline" style="color:#4dc9f6;">DIVINE ASCENSION</div>
        <div class="dramatic-sub">Second Place</div>
        <div class="band-name" style="color:#6dd6ff;">Hällas</div>
        <div class="song-name">"Face of an Angel"</div>
        <div class="rune-divider" style="background:linear-gradient(90deg,transparent,#4dc9f6,#e0eaff,#4dc9f6,transparent); box-shadow:0 0 12px rgba(77,201,246,0.5);"></div>
        <div class="points-display" style="color:#4dc9f6;" data-points="57">0</div>
        <div class="points-label">Total Points</div>
        <div class="destination dest-final">Direct to Final</div>
        <div class="commentary">Two champions, zero haters. Tompa and Wickman crowned Hällas with divine favor, and not a single voter dared dissent. 57 points of celestial grace. The angelic face rises above the frost &mdash; ascending directly to the Final, untouched by contempt.</div>
        <div class="voter-info">
            <div class="voter-group">
                <div class="voter-label">Champions (10p)</div>
                <div class="voter-names champion" style="color:#4dc9f6; text-shadow:0 0 8px rgba(77,201,246,0.5);">Tompa, Wickman</div>
            </div>
            <div class="voter-group">
                <div class="voter-label">Bottom Voter (1p)</div>
                <div class="voter-names" style="color:#334455;">None</div>
            </div>
        </div>
    </div>
</div>

<!-- ═══════ Slide 8: #1 — Amorphis (Winner) ═══════ -->
<div class="slide" id="slide-8" data-intensity="9">
    <div class="result-card winner">
        <div class="dramatic-headline">LORDS OF THE NORTH</div>
        <div class="dramatic-sub" style="color:#c9a84c; letter-spacing:0.6em;">Heat 3 Champion</div>
        <div class="band-name">Amorphis</div>
        <div class="song-name">"Light and Shadow"</div>
        <div class="rune-divider"></div>
        <div class="points-display" data-points="60">0</div>
        <div class="points-label">Total Points</div>
        <div class="destination dest-final">Heat 3 Winner &bull; Direct to Final</div>
        <div class="commentary">THREE champions &mdash; Ola, Kalle, and Anders Östrem &mdash; raised the banner for Amorphis. 60 points of pure northern dominance. Only Wickman dared cast a shadow with 1 point, but even shadows bow before this light. The undisputed rulers of Heat 3 march to the Final.</div>
        <div class="voter-info">
            <div class="voter-group">
                <div class="voter-label">Champions (10p)</div>
                <div class="voter-names champion">Ola, Kalle, Anders Östrem</div>
            </div>
            <div class="voter-group">
                <div class="voter-label">Bottom Voter (1p)</div>
                <div class="voter-names hater">Wickman</div>
            </div>
        </div>
    </div>
</div>

<!-- ═══════ Slide 9: Summary ═══════ -->
<div class="slide" id="slide-9" data-intensity="5">
    <div class="result-card">
        <div class="summary-heading">Heat 3 &mdash; Final Standings</div>
        <table class="summary-table">
            <tr><th>#</th><th>Song</th><th>Pts</th><th>10p</th><th>Destination</th></tr>
            <tr class="final-row"><td>1</td><td>Light and Shadow / Amorphis</td><td>60</td><td>3</td><td>FINAL</td></tr>
            <tr class="final-row"><td>2</td><td>Face of an Angel / Hällas</td><td>57</td><td>2</td><td>FINAL</td></tr>
            <tr class="sc-row"><td>3</td><td>The Shaman / Havamal</td><td>44</td><td>1</td><td>ANDRA CHANSEN</td></tr>
            <tr class="sc-row"><td>4</td><td>One Way Road / Bad Intentions</td><td>43</td><td>1</td><td>ANDRA CHANSEN</td></tr>
            <tr class="elim-row"><td>5</td><td>Unbound / Machine Head</td><td>42</td><td>1</td><td>Eliminated</td></tr>
            <tr class="elim-row"><td>6</td><td>Live in Fear / Tremonti</td><td>39</td><td>0</td><td>Eliminated</td></tr>
            <tr class="elim-row"><td>7</td><td>Sirens / Sweden Metal Aid</td><td>35</td><td>1</td><td>Eliminated</td></tr>
            <tr class="elim-row"><td>8</td><td>OCD / Everon</td><td>31</td><td>0</td><td>Eliminated</td></tr>
        </table>
        <div class="commentary" style="margin-top:1.5rem;">
            Amorphis dominated with 60 points and three champions &mdash; the strongest showing in Heat 3.
            Hällas proved that universal respect (zero haters) can carry you to the Final.
            OCD earned the dubious honor of most 1-point votes with three haters.
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/gsap@3.14/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.14/dist/TextPlugin.min.js"></script>
<script>
    gsap.registerPlugin(TextPlugin);

    // ═══ CONFIGURATION ═══
    var totalSlides = 10;
    var currentSlide = 0;
    var activeTimeline = null;
    var glowTween = null;
    var RUNES = 'ᚠᚢᚦᚨᚱᚲᚷᚹᚺᚾᛁᛃᛇᛈᛉᛊᛏᛒᛖᛗᛚᛜᛞᛟ';

    // ═══ SPLIT TEXT INTO PER-CHARACTER SPANS (enables GSAP stagger) ═══
    function splitChars(el) {
        var text = el.textContent;
        if (!el.dataset.originalText) el.dataset.originalText = text;
        el.innerHTML = '';
        for (var i = 0; i < text.length; i++) {
            var span = document.createElement('span');
            span.className = 'char';
            span.textContent = text[i] === ' ' ? '\u00A0' : text[i];
            el.appendChild(span);
        }
        return el.querySelectorAll('.char');
    }

    function restoreText(el) {
        if (el && el.dataset.originalText) el.textContent = el.dataset.originalText;
    }

    // ═══ SNOWFALL ═══
    function createSnowfall() {
        for (var i = 0; i < 70; i++) {
            var f = document.createElement('div');
            f.className = 'snowflake';
            var s = (1 + Math.random() * 3) + 'px';
            f.style.width = s; f.style.height = s;
            f.style.left = Math.random() * 100 + '%';
            f.style.animationDuration = (8 + Math.random() * 12) + 's';
            f.style.animationDelay = Math.random() * 15 + 's';
            f.style.setProperty('--sway', ((Math.random() - 0.5) * 80) + 'px');
            f.style.setProperty('--snow-opacity', 0.3 + Math.random() * 0.5);
            if (Math.random() < 0.3) f.style.filter = 'blur(1px)';
            document.body.appendChild(f);
        }
    }

    // ═══ PARTICLE BURST — GSAP-animated DOM particle physics ═══
    function particleBurst(count, color, cx, cy) {
        for (var i = 0; i < count; i++) {
            var p = document.createElement('div');
            var size = 2 + Math.random() * 5;
            Object.assign(p.style, {
                position: 'fixed', width: size + 'px', height: size + 'px',
                background: color, borderRadius: '50%',
                left: cx + 'px', top: cy + 'px',
                zIndex: '150', pointerEvents: 'none',
                boxShadow: '0 0 ' + (size * 2) + 'px ' + color
            });
            document.body.appendChild(p);
            var angle = (Math.PI * 2 / count) * i + (Math.random() - 0.5) * 0.8;
            var dist = 60 + Math.random() * 200;
            gsap.to(p, {
                x: Math.cos(angle) * dist,
                y: Math.sin(angle) * dist - Math.random() * 40,
                opacity: 0, scale: 0,
                duration: 0.6 + Math.random() * 0.8,
                ease: 'power2.out',
                onComplete: function() { this.targets()[0].remove(); }
            });
        }
    }

    // ═══ GOLD CASCADE — winner celebration particle shower ═══
    function goldCascade() {
        var cx = window.innerWidth / 2, cy = window.innerHeight / 2;
        for (var i = 0; i < 60; i++) {
            var p = document.createElement('div');
            var size = 3 + Math.random() * 8;
            var hue = 40 + Math.random() * 20;
            Object.assign(p.style, {
                position: 'fixed', width: size + 'px', height: size + 'px',
                background: 'hsl(' + hue + ',100%,' + (60 + Math.random() * 30) + '%)',
                borderRadius: '50%', left: cx + 'px', top: cy + 'px',
                zIndex: '150', pointerEvents: 'none',
                boxShadow: '0 0 ' + (size * 3) + 'px rgba(255,215,0,0.7)'
            });
            document.body.appendChild(p);
            gsap.to(p, {
                x: (Math.random() - 0.5) * window.innerWidth,
                y: (Math.random() - 0.5) * window.innerHeight,
                rotation: gsap.utils.random(-360, 360),
                opacity: 0, scale: 0,
                duration: 1.5 + Math.random() * 2,
                delay: Math.random() * 0.5,
                ease: 'power2.out',
                onComplete: function() { this.targets()[0].remove(); }
            });
        }
    }

    // ═══ RUNE SCRAMBLE — band name decodes from Elder Futhark runes ═══
    function runeScramble(el, tl, duration, position) {
        var finalText = el.dataset.originalText || el.textContent;
        if (!el.dataset.originalText) el.dataset.originalText = finalText;
        var chars = finalText.split('');
        el.textContent = chars.map(function(c) {
            return c === ' ' ? ' ' : RUNES[Math.floor(Math.random() * RUNES.length)];
        }).join('');
        gsap.set(el, { opacity: 1 });
        var obj = { progress: 0 };
        tl.to(obj, {
            progress: 1, duration: duration, ease: 'power1.in',
            onUpdate: function() {
                var resolved = Math.floor(obj.progress * chars.length);
                var display = '';
                for (var i = 0; i < chars.length; i++) {
                    if (i < resolved) display += chars[i];
                    else if (chars[i] === ' ') display += ' ';
                    else display += RUNES[Math.floor(Math.random() * RUNES.length)];
                }
                el.textContent = display;
            }
        }, position);
    }

    // ═══ SCREEN EFFECTS ═══
    function flashScreen(intensity) {
        var el = document.getElementById('flash');
        var brightness = Math.min(0.15 + intensity * 0.06, 0.8);
        var r = Math.min(80 + intensity * 20, 230);
        var g = Math.min(170 + intensity * 10, 255);
        var b = Math.min(220 + intensity * 5, 255);
        el.style.background = 'rgba(' + r + ',' + g + ',' + b + ',' + brightness + ')';
        gsap.fromTo(el, { opacity: 1 }, { opacity: 0, duration: 0.12 + intensity * 0.02, ease: 'power2.out' });
    }

    function screenShake(intensity) {
        var mag = Math.min(intensity * 2, 16);
        var steps = 4 + Math.floor(intensity);
        var shakeTl = gsap.timeline();
        for (var i = 0; i < steps; i++) {
            shakeTl.to(document.body, {
                x: (Math.random() - 0.5) * mag * 2,
                y: (Math.random() - 0.5) * mag,
                duration: 0.04, ease: 'none'
            });
        }
        shakeTl.to(document.body, { x: 0, y: 0, duration: 0.1, ease: 'power2.out' });
    }

    function impactDistortion(intensity) {
        var m = 0.005 + intensity * 0.003;
        gsap.fromTo(document.body,
            { scaleX: 1 + m, scaleY: 1 - m * 0.5 },
            { scaleX: 1, scaleY: 1, duration: 0.4, ease: 'elastic.out(1, 0.3)' });
    }

    // ═══ SLIDE STATE MANAGEMENT ═══
    function prepareSlideForAnimation(slideEl) {
        var els = slideEl.querySelectorAll('.dramatic-headline, .dramatic-sub, .band-name, .song-name, .rune-divider, .points-display, .points-label, .commentary, .voter-info, .summary-heading, .summary-table');
        gsap.set(els, { opacity: 0, clearProps: 'transform,filter,scale' });
        restoreText(slideEl.querySelector('.dramatic-headline'));
        restoreText(slideEl.querySelector('.band-name'));
        restoreText(slideEl.querySelector('.summary-heading'));
        var commentary = slideEl.querySelector('.commentary');
        if (commentary && !commentary.dataset.originalText) commentary.dataset.originalText = commentary.textContent;
        var dest = slideEl.querySelector('.destination');
        if (dest) gsap.set(dest, { opacity: 0, scale: 0, clearProps: 'boxShadow' });
        var pd = slideEl.querySelector('.points-display');
        if (pd) pd.textContent = '0';
        gsap.set(slideEl.querySelectorAll('.voter-group'), { opacity: 0 });
    }

    function resetSlideToFinalState(slideEl) {
        var els = slideEl.querySelectorAll('.dramatic-headline, .dramatic-sub, .band-name, .song-name, .rune-divider, .points-display, .points-label, .commentary, .voter-info, .summary-heading, .summary-table');
        gsap.set(els, { opacity: 1, clearProps: 'transform,filter,scale' });
        restoreText(slideEl.querySelector('.dramatic-headline'));
        restoreText(slideEl.querySelector('.band-name'));
        restoreText(slideEl.querySelector('.summary-heading'));
        var commentary = slideEl.querySelector('.commentary');
        if (commentary && commentary.dataset.originalText) commentary.textContent = commentary.dataset.originalText;
        var dest = slideEl.querySelector('.destination');
        if (dest) gsap.set(dest, { opacity: 1, scale: 1, clearProps: 'boxShadow' });
        var pd = slideEl.querySelector('.points-display');
        if (pd) pd.textContent = pd.dataset.points;
        gsap.set(slideEl.querySelectorAll('.voter-group'), { opacity: 1, clearProps: 'transform' });
    }

    // ═══ CARD TIMELINE — the GSAP showcase ═══
    function buildCardTimeline(slideEl, intensity) {
        var tl = gsap.timeline();
        var card = slideEl.querySelector('.result-card');
        if (!card) return tl;

        var headline = card.querySelector('.dramatic-headline');
        var sub = card.querySelector('.dramatic-sub');
        var bandName = card.querySelector('.band-name');
        var songName = card.querySelector('.song-name');
        var divider = card.querySelector('.rune-divider');
        var pointsDisplay = card.querySelector('.points-display');
        var pointsLabel = card.querySelector('.points-label');
        var destination = card.querySelector('.destination');
        var commentary = card.querySelector('.commentary');
        var voterInfo = card.querySelector('.voter-info');
        var isWinner = card.classList.contains('winner');
        var isFinal = destination ? destination.classList.contains('dest-final') : false;

        // ── HEADLINE: per-character stagger with intensity-scaled physics ──
        if (headline) {
            if (intensity <= 2) {
                tl.fromTo(headline, { y: 30, opacity: 0 },
                    { y: 0, opacity: 1, duration: 0.8, ease: 'power2.out' });
            } else if (intensity <= 5) {
                // Each char gets a unique random rotation via gsap.utils.random returnFunction
                var chars = splitChars(headline);
                gsap.set(headline, { opacity: 1 });
                tl.fromTo(chars,
                    { opacity: 0, y: 50, scale: 0.3, rotation: gsap.utils.random(-25, 25, 1, true) },
                    { opacity: 1, y: 0, scale: 1, rotation: 0, duration: 0.5,
                      stagger: { each: 0.03, from: 'start' }, ease: 'back.out(1.7)' });
            } else if (intensity <= 7) {
                var chars = splitChars(headline);
                gsap.set(headline, { opacity: 1 });
                tl.fromTo(chars,
                    { opacity: 0, y: gsap.utils.random(-120, -60, 1, true),
                      rotation: gsap.utils.random(-40, 40, 1, true), scale: 1.5 },
                    { opacity: 1, y: 0, rotation: 0, scale: 1, duration: 0.45,
                      stagger: { each: 0.025, from: 'center' }, ease: 'power4.out' });
                tl.add(function() {
                    var r = headline.getBoundingClientRect();
                    particleBurst(15 + intensity * 2, '#44cc88', r.left + r.width / 2, r.top + r.height / 2);
                }, '-=0.1');
            } else {
                // Nuclear: chars scatter from random positions, converge with blur clear
                var chars = splitChars(headline);
                gsap.set(headline, { opacity: 1 });
                tl.fromTo(chars,
                    { opacity: 0, scale: 3, filter: 'blur(8px)',
                      x: gsap.utils.random(-80, 80, 1, true),
                      y: gsap.utils.random(-60, 60, 1, true) },
                    { opacity: 1, scale: 1, filter: 'blur(0px)', x: 0, y: 0, duration: 0.6,
                      stagger: { each: 0.025, from: 'random' }, ease: 'expo.out' });
                tl.add(function() { impactDistortion(intensity); }, '-=0.4');
                tl.add(function() {
                    var r = headline.getBoundingClientRect();
                    particleBurst(30 + intensity * 3, isWinner ? '#ffd700' : '#4dc9f6',
                        r.left + r.width / 2, r.top + r.height / 2);
                }, '-=0.2');
            }
        }

        // ── SUB HEADLINE: letter-spacing cinch ──
        if (sub) {
            tl.fromTo(sub, { opacity: 0, y: 10, letterSpacing: '0.8em' },
                { opacity: 1, y: 0, letterSpacing: '0.4em', duration: 0.5, ease: 'power2.out' }, '-=0.2');
        }

        // ── BAND NAME: rune scramble decode ──
        if (bandName) {
            if (!bandName.dataset.originalText) bandName.dataset.originalText = bandName.textContent;
            if (intensity <= 2) {
                tl.fromTo(bandName, { opacity: 0, scale: 0.9 },
                    { opacity: 1, scale: 1, duration: 0.6, ease: 'power2.out' }, '-=0.1');
            } else {
                var scrambleDur = Math.max(0.6, 1.6 - intensity * 0.1);
                if (intensity >= 6) {
                    gsap.set(bandName, { scale: 0.5 });
                    tl.to(bandName, { scale: 1, duration: scrambleDur * 0.6, ease: 'back.out(1.7)' }, '-=0.1');
                    runeScramble(bandName, tl, scrambleDur, '<');
                } else {
                    runeScramble(bandName, tl, scrambleDur, '-=0.1');
                }
            }
        }

        // ── SONG NAME ──
        if (songName) {
            tl.fromTo(songName, { opacity: 0, y: 5 },
                { opacity: 1, y: 0, duration: 0.4, ease: 'power1.out' }, '-=0.3');
        }

        // ── RUNE DIVIDER ──
        if (divider) {
            tl.fromTo(divider, { scaleX: 0, opacity: 0 },
                { scaleX: 1, opacity: 1, duration: 0.4, ease: 'power2.inOut' }, '-=0.1');
        }

        // ── POINTS COUNTER: animated count-up with GSAP snap + keyframe bounce ──
        if (pointsDisplay) {
            var target = parseInt(pointsDisplay.dataset.points) || 0;
            var ptObj = { val: 0 };
            var countDur = Math.max(0.5, 1.4 - intensity * 0.08);
            tl.fromTo(pointsDisplay, { opacity: 0, scale: 0.5 },
                { opacity: 1, scale: 1, duration: 0.3, ease: 'power2.out' }, '-=0.1');
            tl.to(ptObj, {
                val: target, duration: countDur,
                snap: { val: 1 }, ease: 'power2.out',
                onUpdate: function() { pointsDisplay.textContent = Math.round(ptObj.val); }
            }, '<');
            if (intensity >= 4) {
                tl.to(pointsDisplay, {
                    keyframes: [
                        { scale: 1.2, duration: 0.1, ease: 'power2.out' },
                        { scale: 0.95, duration: 0.08, ease: 'power2.in' },
                        { scale: 1, duration: 0.12, ease: 'power1.out' }
                    ]
                });
            }
        }

        // ── POINTS LABEL ──
        if (pointsLabel) {
            tl.fromTo(pointsLabel, { opacity: 0 }, { opacity: 1, duration: 0.3 }, '-=0.6');
        }

        // ── DESTINATION: multi-stage GSAP keyframes ──
        if (destination) {
            var isSC = destination.classList.contains('dest-secondchance');
            var destDelay = isFinal ? 1.0 : isSC ? 0.6 : 0.3;

            if (isFinal && isWinner) {
                tl.to(destination, {
                    keyframes: [
                        { opacity: 1, scale: 2.2, duration: 0.2, ease: 'power4.out' },
                        { scale: 0.8, duration: 0.1, ease: 'power2.in' },
                        { scale: 1.2, duration: 0.1, ease: 'power2.out' },
                        { scale: 0.95, duration: 0.08, ease: 'power2.in' },
                        { scale: 1, duration: 0.15, ease: 'elastic.out(1, 0.5)' }
                    ],
                    delay: destDelay,
                    onStart: function() { flashScreen(9); screenShake(9); goldCascade(); },
                    onComplete: function() {
                        glowTween = gsap.to(destination, {
                            boxShadow: '0 0 60px rgba(255,215,0,0.6), 0 0 120px rgba(255,215,0,0.2)',
                            duration: 1.5, repeat: -1, yoyo: true, ease: 'sine.inOut'
                        });
                    }
                });
            } else if (isFinal) {
                tl.to(destination, {
                    keyframes: [
                        { opacity: 1, scale: 2.0, duration: 0.2, ease: 'power4.out' },
                        { scale: 0.75, duration: 0.1, ease: 'power2.in' },
                        { scale: 1.3, duration: 0.12, ease: 'power3.out' },
                        { scale: 0.9, duration: 0.08, ease: 'power2.in' },
                        { scale: 1.05, duration: 0.1, ease: 'power2.out' },
                        { scale: 1, duration: 0.15, ease: 'elastic.out(1, 0.6)' }
                    ],
                    delay: destDelay,
                    onStart: function() {
                        flashScreen(8); screenShake(7); impactDistortion(6);
                        var r = destination.getBoundingClientRect();
                        particleBurst(40, '#4dc9f6', r.left + r.width / 2, r.top + r.height / 2);
                        setTimeout(function() {
                            particleBurst(25, '#44cc88', r.left + r.width / 2, r.top + r.height / 2);
                        }, 250);
                        setTimeout(function() { flashScreen(5); }, 350);
                    },
                    onComplete: function() {
                        glowTween = gsap.to(destination, {
                            boxShadow: '0 0 50px rgba(77,201,246,0.5), 0 0 100px rgba(77,201,246,0.2)',
                            duration: 1.5, repeat: -1, yoyo: true, ease: 'sine.inOut'
                        });
                    }
                });
            } else if (isSC) {
                tl.to(destination, {
                    keyframes: [
                        { opacity: 1, scale: 1.3, rotation: -2, duration: 0.2, ease: 'power3.out' },
                        { scale: 0.95, rotation: 1, duration: 0.12, ease: 'power2.in' },
                        { scale: 1, rotation: 0, duration: 0.18, ease: 'power1.out' }
                    ],
                    delay: destDelay
                });
            } else {
                tl.fromTo(destination, { opacity: 0, scale: 0 },
                    { opacity: 1, scale: 1, duration: 0.4, ease: 'back.out(1.5)', delay: destDelay });
            }
        }

        // ── COMMENTARY: TextPlugin typewriter for the winner ──
        if (commentary) {
            if (intensity >= 8 && (isWinner || isFinal)) {
                var fullText = commentary.dataset.originalText || commentary.textContent;
                if (!commentary.dataset.originalText) commentary.dataset.originalText = fullText;
                commentary.textContent = '';
                tl.set(commentary, { opacity: 1 });
                tl.to(commentary, {
                    duration: Math.min(fullText.length * 0.018, 5),
                    text: { value: fullText, delimiter: '' },
                    ease: 'none'
                }, '-=0.3');
            } else {
                tl.fromTo(commentary, { opacity: 0, y: 15 },
                    { opacity: 1, y: 0, duration: 0.5, ease: 'power1.out' }, '-=0.3');
            }
        }

        // ── VOTER INFO: staggered group reveal ──
        if (voterInfo) {
            var groups = voterInfo.querySelectorAll('.voter-group');
            tl.fromTo(groups, { opacity: 0, y: 15 },
                { opacity: 1, y: 0, duration: 0.4, stagger: 0.2, ease: 'power2.out' }, '-=0.2');
        }

        return tl;
    }

    // ═══ SUMMARY TIMELINE ═══
    function buildSummaryTimeline(slideEl) {
        var tl = gsap.timeline();
        var heading = slideEl.querySelector('.summary-heading');
        var table = slideEl.querySelector('.summary-table');
        var commentary = slideEl.querySelector('.commentary');

        if (heading) {
            var chars = splitChars(heading);
            gsap.set(heading, { opacity: 1 });
            tl.fromTo(chars,
                { opacity: 0, y: -20, scale: 0.5 },
                { opacity: 1, y: 0, scale: 1, duration: 0.4,
                  stagger: { each: 0.02, from: 'start' }, ease: 'back.out(1.5)' });
        }

        if (table) {
            gsap.set(table, { opacity: 1 });
            var headerCells = table.querySelectorAll('th');
            var dataRows = table.querySelectorAll('tr:not(:first-child)');
            tl.fromTo(headerCells, { opacity: 0, y: -10 },
                { opacity: 1, y: 0, duration: 0.3, stagger: 0.04, ease: 'power2.out' }, '-=0.1');
            tl.fromTo(dataRows, { opacity: 0, x: -40, scale: 0.97 },
                { opacity: 1, x: 0, scale: 1, duration: 0.35,
                  stagger: { each: 0.09, from: 'start' }, ease: 'back.out(1.2)' }, '-=0.1');
        }

        if (commentary) {
            tl.fromTo(commentary, { opacity: 0 }, { opacity: 1, duration: 0.5 }, '-=0.1');
        }
        return tl;
    }

    // ═══ NAVIGATION ═══
    function nextSlide() {
        if (currentSlide >= totalSlides - 1) return;
        if (activeTimeline) { activeTimeline.kill(); activeTimeline = null; }
        if (glowTween) { glowTween.kill(); glowTween = null; }

        var current = document.getElementById('slide-' + currentSlide);
        gsap.to(current, { opacity: 0, duration: 0.4,
            onComplete: function() { current.classList.remove('active'); } });

        currentSlide++;
        var next = document.getElementById('slide-' + currentSlide);
        var intensity = parseInt(next.dataset.intensity) || 1;

        flashScreen(intensity);
        if (intensity >= 3) screenShake(intensity);
        if (intensity >= 5) impactDistortion(intensity);

        if (intensity >= 9) {
            setTimeout(function() { flashScreen(8); }, 200);
            setTimeout(function() {
                var el = document.getElementById('flash');
                el.style.background = 'rgba(255,215,0,0.5)';
                gsap.fromTo(el, { opacity: 1 }, { opacity: 0, duration: 0.5, ease: 'power2.out' });
            }, 500);
            setTimeout(function() { flashScreen(6); }, 800);
        } else if (intensity >= 8) {
            setTimeout(function() { flashScreen(6); }, 250);
            setTimeout(function() {
                var el = document.getElementById('flash');
                el.style.background = 'rgba(77,201,246,0.4)';
                gsap.fromTo(el, { opacity: 1 }, { opacity: 0, duration: 0.4, ease: 'power2.out' });
            }, 500);
        }

        prepareSlideForAnimation(next);
        next.classList.add('active');
        gsap.fromTo(next, { opacity: 0 }, { opacity: 1, duration: 0.5 });

        var isSummary = next.querySelector('.summary-table');
        activeTimeline = isSummary ? buildSummaryTimeline(next) : buildCardTimeline(next, intensity);
        updateProgress();
    }

    function prevSlide() {
        if (currentSlide <= 0) return;
        if (activeTimeline) { activeTimeline.kill(); activeTimeline = null; }
        if (glowTween) { glowTween.kill(); glowTween = null; }

        var current = document.getElementById('slide-' + currentSlide);
        gsap.to(current, { opacity: 0, duration: 0.3 });
        current.classList.remove('active');
        restoreText(current.querySelector('.dramatic-headline'));
        restoreText(current.querySelector('.band-name'));
        var dest = current.querySelector('.destination');
        if (dest) gsap.set(dest, { opacity: 0, scale: 0, clearProps: 'boxShadow' });

        currentSlide--;
        var prev = document.getElementById('slide-' + currentSlide);
        resetSlideToFinalState(prev);
        prev.classList.add('active');
        gsap.to(prev, { opacity: 1, duration: 0.3 });
        updateProgress();
    }

    function updateProgress() {
        document.getElementById('progress').style.width =
            (currentSlide / (totalSlides - 1)) * 100 + '%';
    }

    // ═══ EVENT LISTENERS ═══
    document.addEventListener('click', nextSlide);
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft' || e.key === 'ArrowUp' || e.key === 'Backspace') {
            e.preventDefault(); prevSlide();
        } else if (e.key === 'ArrowRight' || e.key === 'ArrowDown' || e.key === ' ' || e.key === 'Enter') {
            e.preventDefault(); nextSlide();
        }
    });

    // ═══ INIT ═══
    createSnowfall();
    updateProgress();

    // Title: each character of "MELLO 2026" scatters in from unique random positions
    (function() {
        var s0 = document.getElementById('slide-0');
        var titleMain = s0.querySelector('.title-main');
        var titleSub = s0.querySelector('.title-sub');
        var titleHeat = s0.querySelector('.title-heat');
        var titleRunes = s0.querySelector('.title-runes');
        gsap.set([titleMain, titleSub, titleHeat, titleRunes], { opacity: 0 });

        var tl = gsap.timeline({ delay: 0.3 });

        // gsap.utils.random with returnFunction=true gives each char a DIFFERENT value
        var chars = splitChars(titleMain);
        gsap.set(titleMain, { opacity: 1 });
        tl.fromTo(chars,
            { opacity: 0,
              y: gsap.utils.random(-120, 120, 1, true),
              x: gsap.utils.random(-60, 60, 1, true),
              rotation: gsap.utils.random(-45, 45, 1, true),
              scale: 0 },
            { opacity: 1, y: 0, x: 0, rotation: 0, scale: 1,
              duration: 0.8, stagger: { each: 0.05, from: 'random' }, ease: 'back.out(1.5)' });

        tl.fromTo(titleSub, { opacity: 0, filter: 'blur(12px)' },
            { opacity: 1, filter: 'blur(0px)', duration: 0.8, ease: 'power2.out' }, '-=0.3');

        tl.fromTo(titleHeat, { opacity: 0, y: 40, scale: 0.8 },
            { opacity: 1, y: 0, scale: 1, duration: 0.6, ease: 'back.out(1.7)' }, '-=0.2');

        if (titleRunes) {
            var runeText = titleRunes.textContent.trim().split(/\s+/);
            titleRunes.textContent = '';
            runeText.forEach(function(r) {
                var span = document.createElement('span');
                span.className = 'char';
                span.textContent = r;
                span.style.marginRight = '0.5em';
                titleRunes.appendChild(span);
            });
            var runeSpans = titleRunes.querySelectorAll('.char');
            gsap.set(titleRunes, { opacity: 1 });
            tl.fromTo(runeSpans,
                { opacity: 0, scale: 0, rotation: -180 },
                { opacity: 0.5, scale: 1, rotation: 0, duration: 0.5,
                  stagger: { each: 0.08, from: 'center' }, ease: 'back.out(2.5)' }, '-=0.2');
        }
    })();
</script>

</body>
</html>
